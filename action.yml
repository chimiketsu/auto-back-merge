name: Auto-Back-Merge
description: "Automatically create a back merge PR when pushing to the production branch."
author: "chimiketsu"
branding:
  icon: file-text
  color: purple

# masterにpushしたときに発生
on:
  push:
    branches:
      - main

runs:
  # タスクを再利用できるようにする
  using: "composite"
  steps:
    # hubコマンドを使用できるようにする
    - name: Install hub
      run: |
        sudo apt-get update
        sudo apt-get install hub

    # master → developにマージバックするPRを作成する
    - name: Create back merge pull request
      shell: bash
      # Create pull request to merge master branch into develop branch
      run: hub pull-request -b develop -h main -m "Merge master into develop"
